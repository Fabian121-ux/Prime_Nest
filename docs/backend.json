
{
  "entities": {
    "User": {
      "title": "User",
      "description": "Represents a user account in the Prime Nest application.",
      "type": "object",
      "properties": {
        "userId": { "type": "string", "description": "Unique identifier for the User entity." },
        "email": { "type": "string", "description": "Email address of the user.", "format": "email" },
        "phone": { "type": "string", "description": "Phone number of the user." },
        "fullName": { "type": "string", "description": "Full name of the user." },
        "rolePrimary": { "type": "string", "description": "Primary role of the user (tenant, landlord, artisan, or admin)." },
        "roles": { "type": "array", "description": "Array of roles the user has.", "items": { "type": "string" }},
        "trustTier": { "type": "number", "description": "Trust tier of the user (0-4)." },
        "isVerified": { "type": "boolean", "description": "Indicates whether the user is verified." },
        "status": { "type": "string", "description": "Status of the user account (active, suspended, banned)." },
        "createdAt": { "type": "string", "description": "Timestamp indicating when the user account was created.", "format": "date-time" },
        "updatedAt": { "type": "string", "description": "Timestamp indicating when the user account was last updated.", "format": "date-time" }
      },
      "required": ["userId", "email", "fullName", "rolePrimary", "roles", "trustTier", "isVerified", "status", "createdAt", "updatedAt"]
    },
    "TenantProfile": {
      "title": "TenantProfile",
      "description": "Represents the profile information specific to a tenant.",
      "type": "object",
      "properties": {
        "userId": { "type": "string", "description": "Reference to User. (Relationship: User 1:1 TenantProfile)" },
        "preferredLocation": { "type": "string", "description": "Preferred location for the tenant." },
        "budgetRange": { "type": "string", "description": "Budget range of the tenant." }
      },
      "required": ["userId"]
    },
    "LandlordProfile": {
        "title": "LandlordProfile",
        "description": "Represents the profile information specific to a landlord.",
        "type": "object",
        "properties": {
            "userId": { "type": "string", "description": "Reference to User. (Relationship: User 1:1 LandlordProfile)" },
            "totalProperties": { "type": "number", "description": "Total number of properties owned by the landlord." }
        },
        "required": ["userId"]
    },
    "ArtisanProfile": {
        "title": "ArtisanProfile",
        "description": "Represents the profile information specific to an artisan.",
        "type": "object",
        "properties": {
            "userId": { "type": "string", "description": "Reference to User. (Relationship: User 1:1 ArtisanProfile)" },
            "skills": { "type": "array", "description": "Array of skills possessed by the artisan.", "items": { "type": "string" } },
            "hourlyRate": { "type": "number", "description": "Hourly rate of the artisan." }
        },
        "required": ["userId"]
    },
    "Listing": {
        "title": "Listing",
        "description": "Represents a listing for a property, job, or service.",
        "type": "object",
        "properties": {
            "listingId": { "type": "string", "description": "Unique identifier for the Listing entity." },
            "ownerId": { "type": "string", "description": "Reference to User. (Relationship: User 1:N Listing)" },
            "type": { "type": "string", "description": "Type of listing (rental, job, or service)." },
            "title": { "type": "string", "description": "Title of the listing." },
            "description": { "type": "string", "description": "Description of the listing." },
            "price": { "type": "number", "description": "Price of the listing." },
            "location": { "type": "string", "description": "Location of the listing." },
            "status": { "type": "string", "description": "Status of the listing (draft, active, closed)." },
            "createdAt": { "type": "string", "description": "Timestamp indicating when the listing was created.", "format": "date-time" }
        },
        "required": ["listingId", "ownerId", "type", "title", "price", "status", "createdAt"]
    },
    "Conversation": {
        "title": "Conversation",
        "description": "Represents a chat thread between two users related to a listing.",
        "type": "object",
        "properties": {
            "conversationId": { "type": "string", "description": "Unique identifier for the Conversation entity." },
            "listingId": { "type": "string", "description": "Reference to Listing. (Relationship: Listing 1:N Conversation)" },
            "participants": { "type": "array", "description": "Array of user IDs participating in the conversation.", "items": { "type": "string" } },
            "dealId": { "type": "string", "description": "Optional reference to a Deal. (Relationship: Deal 1:1 Conversation)" },
            "createdAt": { "type": "string", "description": "Timestamp indicating when the conversation was created.", "format": "date-time" }
        },
        "required": ["conversationId", "listingId", "participants", "createdAt"]
    },
    "Message": {
        "title": "Message",
        "description": "Represents a chat message within a conversation.",
        "type": "object",
        "properties": {
            "messageId": { "type": "string", "description": "Unique identifier for the Message entity." },
            "conversationId": { "type": "string", "description": "Reference to Conversation. (Relationship: Conversation 1:N Message)" },
            "senderId": { "type": "string", "description": "Reference to User. (Relationship: User 1:N Message, Sender)" },
            "content": { "type": "string", "description": "Content of the message." },
            "type": { "type": "string", "description": "Type of message.", "enum": ["text", "file", "system", "escrow"] },
            "createdAt": { "type": "string", "description": "Timestamp indicating when the message was created.", "format": "date-time" }
        },
        "required": ["messageId", "conversationId", "senderId", "content", "type", "createdAt"]
    },
    "Deal": {
        "title": "Deal",
        "description": "Represents a formal agreement between a buyer and a seller for a specific listing.",
        "type": "object",
        "properties": {
            "dealId": { "type": "string", "description": "Unique identifier for the Deal entity." },
            "listingId": { "type": "string", "description": "Reference to the Listing this deal is for." },
            "buyerId": { "type": "string", "description": "The user ID of the party purchasing the service/rental." },
            "sellerId": { "type": "string", "description": "The user ID of the party providing the service/rental." },
            "conversationId": { "type": "string", "description": "Reference to the Conversation where the deal was negotiated." },
            "escrowId": { "type": "string", "description": "Reference to the associated Escrow transaction." },
            "amount": { "type": "number", "description": "The total amount for the deal." },
            "status": { "type": "string", "description": "The current status of the deal.", "enum": ["initiated", "funded", "active", "completed", "disputed", "cancelled"]},
            "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp for when the deal was created." },
            "updatedAt": { "type": "string", "format": "date-time", "description": "Timestamp for the last update to the deal." }
        },
        "required": ["dealId", "listingId", "buyerId", "sellerId", "conversationId", "escrowId", "amount", "status", "createdAt", "updatedAt"]
    },
    "Escrow": {
        "title": "Escrow",
        "description": "Represents an escrow transaction.",
        "type": "object",
        "properties": {
            "escrowId": { "type": "string", "description": "Unique identifier for the Escrow entity." },
            "payerId": { "type": "string", "description": "Reference to User. (Relationship: User 1:N Escrow, Payer)" },
            "payeeId": { "type": "string", "description": "Reference to User. (Relationship: User 1:N Escrow, Payee)" },
            "listingId": { "type": "string", "description": "Reference to Listing. (Relationship: Listing 1:N Escrow)" },
            "amount": { "type": "number", "description": "Amount of the escrow transaction." },
            "currency": { "type": "string", "description": "Currency of the escrow transaction (e.g., NGN)." },
            "status": { "type": "string", "description": "Status of the escrow transaction (initiated, held, disputed, released, refunded)." },
            "currentStage": { "type": "string", "description": "The current stage of the escrow process." },
            "createdAt": { "type": "string", "description": "Timestamp indicating when the escrow transaction was created.", "format": "date-time" }
        },
        "required": ["escrowId", "payerId", "payeeId", "listingId", "amount", "currency", "status", "createdAt"]
    },
    "EscrowEvent": {
        "title": "EscrowEvent",
        "description": "Represents an audit log event for an escrow transaction.",
        "type": "object",
        "properties": {
            "eventId": { "type": "string", "description": "Unique identifier for the EscrowEvent entity." },
            "escrowId": { "type": "string", "description": "Reference to Escrow. (Relationship: Escrow 1:N EscrowEvent)" },
            "actorId": { "type": "string", "description": "Reference to User. (Relationship: User 1:N EscrowEvent, Actor)" },
            "action": { "type": "string", "description": "Action performed on the escrow transaction (created, released, disputed)." },
            "evidenceUrl": { "type": "string", "description": "URL of evidence related to the escrow event.", "format": "uri" },
            "createdAt": { "type": "string", "description": "Timestamp indicating when the escrow event was created.", "format": "date-time" }
        },
        "required": ["eventId", "escrowId", "actorId", "action", "createdAt"]
    },
    "Review": {
        "title": "Review",
        "description": "Represents a review of a user or listing.",
        "type": "object",
        "properties": {
            "reviewId": { "type": "string", "description": "Unique identifier for the Review entity." },
            "reviewerId": { "type": "string", "description": "Reference to User. (Relationship: User 1:N Review, Reviewer)" },
            "revieweeId": { "type": "string", "description": "Reference to User. (Relationship: User 1:N Review, Reviewee)" },
            "listingId": { "type": "string", "description": "Reference to Listing. (Relationship: Listing 1:N Review)" },
            "rating": { "type": "number", "description": "Rating given in the review (1-5)." },
            "comment": { "type": "string", "description": "Comment provided in the review." },
            "createdAt": { "type": "string", "description": "Timestamp indicating when the review was created.", "format": "date-time" }
        },
        "required": ["reviewId", "reviewerId", "revieweeId", "listingId", "rating", "createdAt"]
    },
    "AdminAction": {
        "title": "AdminAction",
        "description": "Represents an action performed by an administrator.",
        "type": "object",
        "properties": {
            "actionId": { "type": "string", "description": "Unique identifier for the AdminAction entity." },
            "adminId": { "type": "string", "description": "Reference to User. (Relationship: User 1:N AdminAction, Admin)" },
            "targetType": { "type": "string", "description": "Type of target affected by the admin action (user, listing, or escrow)." },
            "targetId": { "type": "string", "description": "Identifier of the target affected by the admin action." },
            "action": { "type": "string", "description": "The admin action performed." },
            "reason": { "type": "string", "description": "Reason for the admin action." },
            "createdAt": { "type": "string", "description": "Timestamp indicating when the admin action was created.", "format": "date-time" }
        },
        "required": ["actionId", "adminId", "targetType", "targetId", "action", "createdAt"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores user account information. Uses userId as the document ID."
    },
    "/tenant_profiles/{userId}": {
      "schema": { "$ref": "#/entities/TenantProfile" },
      "description": "Stores tenant-specific profile information. Uses userId as the document ID to link to the user document."
    },
    "/landlord_profiles/{userId}": {
      "schema": { "$ref": "#/entities/LandlordProfile" },
      "description": "Stores landlord-specific profile information. Uses userId as the document ID to link to the user document."
    },
    "/artisan_profiles/{userId}": {
      "schema": { "$ref": "#/entities/ArtisanProfile" },
      "description": "Stores artisan-specific profile information. Uses userId as the document ID to link to the user document."
    },
    "/listings/{listingId}": {
      "schema": { "$ref": "#/entities/Listing" },
      "description": "Stores listing information. Uses listingId as the document ID."
    },
    "/deals/{dealId}": {
        "schema": { "$ref": "#/entities/Deal" },
        "description": "Stores deal information. Uses dealId as the document ID."
    },
    "/conversations/{conversationId}": {
      "schema": { "$ref": "#/entities/Conversation" },
      "description": "Stores conversation thread information. Uses conversationId as the document ID."
    },
    "/conversations/{conversationId}/messages/{messageId}": {
      "schema": { "$ref": "#/entities/Message" },
      "description": "Stores chat messages within a conversation. Uses messageId as the document ID."
    },
    "/escrows/{escrowId}": {
      "schema": { "$ref": "#/entities/Escrow" },
      "description": "Stores escrow transaction information. Uses escrowId as the document ID."
    },
    "/escrow_events/{eventId}": {
      "schema": { "$ref": "#/entities/EscrowEvent" },
      "description": "Stores audit log events for escrow transactions. Uses eventId as the document ID."
    },
    "/reviews/{reviewId}": {
      "schema": { "$ref": "#/entities/Review" },
      "description": "Stores reviews of users or listings. Uses reviewId as the document ID."
    },
    "/admin_actions/{actionId}": {
      "schema": { "$ref": "#/entities/AdminAction" },
      "description": "Stores actions performed by administrators. Uses actionId as the document ID."
    }
  }
}
